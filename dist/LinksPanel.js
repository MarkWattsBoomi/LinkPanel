!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(1))},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);n(3);var a=function(t){function e(e){var n=t.call(this,e)||this;n.componentId="",n.flowKey="",n.attributes={},n.selectedItem=null,n.text="",n.componentId=e.id,n.flowKey=e.flowKey;var r=manywho.model.getComponent(n.props.id,n.props.flowKey);if(r.attributes)for(var o in r.attributes)n.attributes[o]=r.attributes[o];return n}return r(e,t),e.prototype.componentDidMount=function(){this.forceUpdate()},e.prototype.componentDidUpdate=function(){},e.prototype.getAttribute=function(t){return this.attributes[t]?this.attributes[t]:null},e.prototype.render=function(){var t=manywho.model.getComponent(this.componentId,this.flowKey),e=(manywho.state.getComponent(this.componentId,this.flowKey),[]),n=t.objectData;if(n&&n.length>0)for(var r=0;r<n.length;r++){var a=n[r],l=manywho.utils.getObjectDataProperty(a.properties,"Display Order").contentValue,i=manywho.utils.getObjectDataProperty(a.properties,"Caption").contentValue,c=manywho.utils.getObjectDataProperty(a.properties,"Children").objectData,u=manywho.utils.getObjectDataProperty(a.properties,"Link").contentValue,p=null;p=u?o.createElement("div",null,o.createElement("a",{href:u,target:"_blank",className:"columnar-links-panel-column-link"},o.createElement("span",null,i))):o.createElement("div",null,o.createElement("span",null,i));var s=[];if(c&&c.length>0)for(var m=0;m<c.length;m++){var f=c[m],y=manywho.utils.getObjectDataProperty(f.properties,"Display Order").contentValue,d=manywho.utils.getObjectDataProperty(f.properties,"Caption").contentValue,h=manywho.utils.getObjectDataProperty(f.properties,"Link").contentValue;s[y]=o.createElement("div",{className:"columnar-links-panel-column-item"},o.createElement("a",{href:h,target:"_blank",className:"columnar-links-panel-column-item-link"},o.createElement("span",null,d)))}e[l]=o.createElement("div",{className:"columnar-links-panel-column"},p,s)}return o.createElement("div",{className:"columnar-links-panel"},e)},e}(o.Component);manywho.component.register("ColumnarLinksPanel",a),e.default=a},function(t,e){t.exports=React},function(t,e){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vTGlua3NQYW5lbC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDkwNzkwYzg0N2FlNjMwZjg3ZWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29sdW1uYXJMaW5rc1BhbmVsLnRzeCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWx1ZSIsIl9fZXh0ZW5kcyIsInRoaXMiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiUmVhY3QiLCJDb2x1bW5hckxpbmtzUGFuZWwiLCJfc3VwZXIiLCJwcm9wcyIsIl90aGlzIiwiY29tcG9uZW50SWQiLCJmbG93S2V5IiwiYXR0cmlidXRlcyIsInNlbGVjdGVkSXRlbSIsInRleHQiLCJpZCIsImZsb3dNb2RlbCIsIm1hbnl3aG8iLCJtb2RlbCIsImdldENvbXBvbmVudCIsImtleSIsImNvbXBvbmVudERpZE1vdW50IiwiZm9yY2VVcGRhdGUiLCJjb21wb25lbnREaWRVcGRhdGUiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVOYW1lIiwicmVuZGVyIiwiY29scyIsInN0YXRlIiwiZ3JvdXBzIiwib2JqZWN0RGF0YSIsImxlbmd0aCIsImdwb3MiLCJncm91cCIsImRpc3BsYXlPcmRlciIsInV0aWxzIiwiZ2V0T2JqZWN0RGF0YVByb3BlcnR5IiwicHJvcGVydGllcyIsImNvbnRlbnRWYWx1ZSIsImNhcHRpb24iLCJpdGVtcyIsImxpbmsiLCJjb2xDb250ZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJsaW5rcyIsImlwb3MiLCJpdGVtIiwiaWRpc3BsYXlPcmRlciIsImljYXB0aW9uIiwiaWxpbmsiLCJDb21wb25lbnQiLCJjb21wb25lbnQiLCJyZWdpc3RlciIsImRlZmF1bHQiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBZixHQUNBLEdBQUFRLEdBQUFSLEtBQUFnQixXQUNBLFdBQTJCLE1BQUFoQixHQUFBLFNBQzNCLFdBQWlDLE1BQUFBLEdBRWpDLE9BREFKLEdBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBUSxFQUFBQyxHQUFzRCxNQUFBUixRQUFBUyxVQUFBQyxlQUFBakIsS0FBQWMsRUFBQUMsSUFHdER0QixFQUFBeUIsRUFBQSxHQUdBekIsSUFBQTBCLEVBQUEsS0RN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QUFzQyxjQUFBLFlBQU9KLEdBSTNCLElBQUlRLEtBQ0osSUFBR1AsR0FBU0EsRUFBTVQsT0FBUyxFQUV2QixJQUFLLEdBQUlpQixHQUFPLEVBQUlBLEVBQU9SLEVBQU1ULE9BQVNpQixJQUMxQyxDQUNJLEdBQUlDLEdBQU9ULEVBQU1RLEdBQ2JFLEVBQWdCakMsUUFBUWtCLE1BQU1DLHNCQUFzQmEsRUFBS1osV0FBVyxpQkFBaUJDLGFBQ3JGYSxFQUFXbEMsUUFBUWtCLE1BQU1DLHNCQUFzQmEsRUFBS1osV0FBVyxXQUFXQyxhQUMxRWMsRUFBUW5DLFFBQVFrQixNQUFNQyxzQkFBc0JhLEVBQUtaLFdBQVcsUUFBUUMsWUFDeEVTLEdBQU1HLEdBQWlCN0MsRUFBQXNDLGNBQUEsT0FBS0csVUFBVSxvQ0FDVnpDLEVBQUFzQyxjQUFBLEtBQUdDLEtBQU1RLEVBQU9QLE9BQU8sU0FBU0MsVUFBVSx5Q0FDdEN6QyxFQUFBc0MsY0FBQSxZQUFPUSxLQUsvQ3hCLEVBQUtPLEdBQWdCN0IsRUFBQXNDLGNBQUEsT0FBS0csVUFBVSwrQkFDWEosRUFDQUssR0FNakMsTUFBTzFDLEdBQUFzQyxjQUFBLE9BQUtHLFVBQVUsd0JBQ1RuQixJQUlyQnJCLEdBbkhpQ0QsRUFBTWdELFVBcUh2Q3BDLFNBQVFxQyxVQUFVQyxTQUFTLHFCQUFzQmpELEdBRWpEcEMsRUFBQXNGLFFBQWVsRCxHSHVEVCxTQUFVbkMsRUFBUUQsR0lwTHhCQyxFQUFBRCxRQUFBbUMsT0owTE0sU0FBVWxDLEVBQVFEIiwiZmlsZSI6IkxpbmtzUGFuZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbl9fd2VicGFja19yZXF1aXJlX18oMyk7XHJcbnZhciBDb2x1bW5hckxpbmtzUGFuZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ29sdW1uYXJMaW5rc1BhbmVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29sdW1uYXJMaW5rc1BhbmVsKHByb3BzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmF0dHJpYnV0ZXMgPSB7fTtcclxuICAgICAgICBfdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgIF90aGlzLnRleHQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudElkID0gcHJvcHMuaWQ7XHJcbiAgICAgICAgX3RoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcbiAgICAgICAgLy9wdXNoIGF0dHJpYnV0ZXMgaW50byBrZXllZCBtYXAgXHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KF90aGlzLnByb3BzLmlkLCBfdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGZsb3dNb2RlbC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hdHRyaWJ1dGVzW2tleV0gPSBmbG93TW9kZWwuYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENvbHVtbmFyTGlua3NQYW5lbC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIENvbHVtbmFyTGlua3NQYW5lbC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbHVtbmFyTGlua3NQYW5lbC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGF0dHJpYnV0ZU5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uYXJMaW5rc1BhbmVsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIHRoaXMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIHRoaXMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGNvbHMgPSBbXTtcclxuICAgICAgICAvL2dldCB0aGUgZGF0YVxyXG4gICAgICAgIHZhciBncm91cHMgPSBmbG93TW9kZWwub2JqZWN0RGF0YTtcclxuICAgICAgICBpZiAoZ3JvdXBzICYmIGdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGdwb3MgPSAwOyBncG9zIDwgZ3JvdXBzLmxlbmd0aDsgZ3BvcysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHNbZ3Bvc107XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheU9yZGVyID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoZ3JvdXAucHJvcGVydGllcywgXCJEaXNwbGF5IE9yZGVyXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoZ3JvdXAucHJvcGVydGllcywgXCJDYXB0aW9uXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGdyb3VwLnByb3BlcnRpZXMsIFwiQ2hpbGRyZW5cIikub2JqZWN0RGF0YTtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoZ3JvdXAucHJvcGVydGllcywgXCJMaW5rXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xDb250ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sQ29udGVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIiwgeyBocmVmOiBsaW5rLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIGNsYXNzTmFtZTogXCJjb2x1bW5hci1saW5rcy1wYW5lbC1jb2x1bW4tbGlua1wiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCBjYXB0aW9uKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sQ29udGVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgY2FwdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlwb3MgPSAwOyBpcG9zIDwgaXRlbXMubGVuZ3RoOyBpcG9zKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpcG9zXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkaXNwbGF5T3JkZXIgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpdGVtLnByb3BlcnRpZXMsIFwiRGlzcGxheSBPcmRlclwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY2FwdGlvbiA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGl0ZW0ucHJvcGVydGllcywgXCJDYXB0aW9uXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlsaW5rID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoaXRlbS5wcm9wZXJ0aWVzLCBcIkxpbmtcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc1tpZGlzcGxheU9yZGVyXSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29sdW1uYXItbGlua3MtcGFuZWwtY29sdW1uLWl0ZW1cIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIiwgeyBocmVmOiBpbGluaywgdGFyZ2V0OiBcIl9ibGFua1wiLCBjbGFzc05hbWU6IFwiY29sdW1uYXItbGlua3MtcGFuZWwtY29sdW1uLWl0ZW0tbGlua1wiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgaWNhcHRpb24pKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29sc1tkaXNwbGF5T3JkZXJdID0gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb2x1bW5hci1saW5rcy1wYW5lbC1jb2x1bW5cIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbHVtbmFyLWxpbmtzLXBhbmVsXCIgfSwgY29scyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbHVtbmFyTGlua3NQYW5lbDtcclxufShSZWFjdC5Db21wb25lbnQpKTtcclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ0NvbHVtbmFyTGlua3NQYW5lbCcsIENvbHVtbmFyTGlua3NQYW5lbCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENvbHVtbmFyTGlua3NQYW5lbDtcclxuXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBMaW5rc1BhbmVsLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNDkwNzkwYzg0N2FlNjMwZjg3ZWUiLCJleHBvcnQgKiBmcm9tICcuL0NvbHVtbmFyTGlua3NQYW5lbCc7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50c3giLCJcclxuZGVjbGFyZSB2YXIgbWFueXdobzogYW55O1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgJy4vTGlua3NQYW5lbC5jc3MnO1xyXG5cclxuY2xhc3MgQ29sdW1uYXJMaW5rc1BhbmVsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiBcclxueyAgIFxyXG4gICAgY29tcG9uZW50SWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBmbG93S2V5OiBzdHJpbmcgPVwiXCI7ICAgIFxyXG4gICAgYXR0cmlidXRlcyA6IGFueSA9IHt9O1xyXG4gICAgc2VsZWN0ZWRJdGVtOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIHRleHQgOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KVxyXG5cdHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIHRoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcblxyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG5cdFx0dmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHRcdGlmKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkgXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuXHRnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSA6IHN0cmluZylcclxuXHR7XHJcblx0XHRpZih0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbiAgICAgICBcclxuICAgIHJlbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgICB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIGNvbnN0IGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgdmFyIGNvbHMgOiBhbnkgPSBbXTtcclxuICAgICAgICAvL2dldCB0aGUgZGF0YVxyXG4gICAgICAgIHZhciBncm91cHMgPSBmbG93TW9kZWwub2JqZWN0RGF0YTtcclxuXHJcbiAgICAgICAgaWYoZ3JvdXBzICYmIGdyb3Vwcy5sZW5ndGggPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yKHZhciBncG9zID0gMCA7IGdwb3MgPCBncm91cHMubGVuZ3RoIDsgZ3BvcysrIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzW2dwb3NdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlPcmRlciA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGdyb3VwLnByb3BlcnRpZXMsXCJEaXNwbGF5IE9yZGVyXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoZ3JvdXAucHJvcGVydGllcyxcIkNhcHRpb25cIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoZ3JvdXAucHJvcGVydGllcyxcIkNoaWxkcmVuXCIpLm9iamVjdERhdGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGdyb3VwLnByb3BlcnRpZXMsXCJMaW5rXCIpLmNvbnRlbnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29sQ29udGVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZihsaW5rKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbENvbnRlbnQgPSA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17bGlua30gdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3NOYW1lPVwiY29sdW1uYXItbGlua3MtcGFuZWwtY29sdW1uLWxpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57Y2FwdGlvbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sQ29udGVudCA9IDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntjYXB0aW9ufTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGlua3MgOiBhbnkgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaXBvcyA9IDAgOyBpcG9zIDwgaXRlbXMubGVuZ3RoIDsgaXBvcysrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpcG9zXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkaXNwbGF5T3JkZXIgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpdGVtLnByb3BlcnRpZXMsXCJEaXNwbGF5IE9yZGVyXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljYXB0aW9uID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoaXRlbS5wcm9wZXJ0aWVzLFwiQ2FwdGlvblwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbGluayA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGl0ZW0ucHJvcGVydGllcyxcIkxpbmtcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc1tpZGlzcGxheU9yZGVyXSA9IDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uYXItbGlua3MtcGFuZWwtY29sdW1uLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2lsaW5rfSB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzc05hbWU9XCJjb2x1bW5hci1saW5rcy1wYW5lbC1jb2x1bW4taXRlbS1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2ljYXB0aW9ufTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29sc1tkaXNwbGF5T3JkZXJdID0gPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5hci1saW5rcy1wYW5lbC1jb2x1bW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmtzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5hci1saW5rcy1wYW5lbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtjb2xzfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignQ29sdW1uYXJMaW5rc1BhbmVsJywgQ29sdW1uYXJMaW5rc1BhbmVsKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbHVtbmFyTGlua3NQYW5lbDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvQ29sdW1uYXJMaW5rc1BhbmVsLnRzeCIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJSZWFjdFwiXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=